package com.t2s.services;

import java.io.FileNotFoundException;
import java.util.List;

import javax.persistence.EntityManager;
import javax.persistence.PersistenceContext;
import javax.persistence.Query;

import org.springframework.stereotype.Service;

import com.t2s.entities.MovementReport;

import net.sf.jasperreports.engine.JRException;

@Service
public class MovementReportService {

	@PersistenceContext
	private EntityManager em;

	public String exportReport(String reportFormat) throws FileNotFoundException, JRException {
		
		Query query = em.createQuery("Select id from tb_movement");

		List<MovementReport> movements = query.getResultList();

		for (MovementReport movementReport : movements) {
			System.out.println(movementReport.toString());
		}

		// @Query("SELECT u FROM User u WHERE u.status = 1")
		// List<MovementReport> findAllActiveUsers();
		/*
		 * movementRepository.
		 * 
		 * 
		 * 
		 * return ""; /* // cria o arquivo File file =
		 * ResourceUtils.getFile("classpath:movements.jrxml"); JasperReport jasperReport
		 * = JasperCompileManager.compileReport(file.getAbsolutePath());
		 * JRBeanCollectionDataSource dataSource = new
		 * JRBeanCollectionDataSource(movements); Map<String, Object> parameters = new
		 * HashMap<>(); parameters.put("createdBy", "allan"); JasperPrint jasperPrint =
		 * JasperFillManager.fillReport(jasperReport, parameters, dataSource);
		 * JasperExportManager.exportReportToHtmlFile(jasperPrint,
		 * "C:\\Users\\allan\\desktop\\"+"MovementReport.html");
		 * 
		 * return "CREATED at C:/movement.html ";
		 */
		return "";

	}
}
